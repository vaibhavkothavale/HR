<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Job Portal with Styled Job Cards</title>
<style>
  :root {
    --primary: #4f8aff;
    --accent: #0b7285;
    --bg-light: #f6f9fb;
    --bg-dark: #191c1f;
    --card-light: #fff;
    --card-dark: #24272b;
    --text-light: #15171a;
    --text-dark: #f6f9fb;
    --border-radius: 14px;
    --shadow: 0 4px 16px rgba(30,40,60,0.08);
  }
  [data-theme="dark"] {
    --bg-light: #191c1f;
    --bg-dark: #191c1f;
    --card-light: #24272b;
    --card-dark: #24272b;
    --text-light: #f6f9fb;
    --text-dark: #f6f9fb;
    --primary: #2a7cff;
    --accent: #5996fe;
    --shadow: 0 2px 12px rgba(30,40,60,0.22);
  }
  body {
    margin: 0;
    padding: 0;
    background: var(--bg-light);
    color: var(--text-light);
    font-family: "Segoe UI", Arial, sans-serif;
    min-height: 100vh;
    transition: background 0.4s, color 0.3s;
  }
  .container {
    max-width: 600px;
    margin: 36px auto 0 auto;
    padding: 20px;
  }
  h1 {
    font-size: 2.1em;
    text-align: center;
    margin-top: 10px;
    margin-bottom: 32px;
    color: var(--primary);
    letter-spacing: 1.5px;
    font-weight: 900;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding: 14px 18px;
    background: var(--card-light);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
  }
  .btn,
  .mode-toggle,
  .panel-toggle {
    border: none;
    background: var(--primary);
    color: #fff;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 1px 6px rgba(30, 40, 60, 0.05);
    transition: background 0.2s, transform 0.12s;
    margin-right: 3px;
    margin-bottom: 6px;
    outline: none;
    display: inline-block;
    min-width: 110px;
  }
  .btn:active,
  .mode-toggle:active,
  .panel-toggle:active {
    transform: scale(0.97);
    background: var(--accent);
  }
  .btn.apply {
    background: var(--accent);
    color: #fff;
    min-width: 110px;
  }
  .btn.small {
    padding: 8px 15px;
    min-width: 80px;
    font-size: 0.98em;
  }
  .btn.delete {
    background: #d62447;
  }
  .btn.edit {
    background: #faa105;
    color: #fff;
  }
  .mode-toggle {
    background: var(--primary);
  }
  .panel-toggle {
    background: var(--accent);
  }
  /* Job Card */
  .job-card {
    background: var(--card-light);
    padding: 20px 25px;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
  }
  .job-info {
    flex: 1;
  }
  .job-title {
    font-weight: bold;
    font-size: 1.2rem;
    margin: 0 0 5px 0;
  }
  .company-reviews {
    font-size: 0.9rem;
    color: #444;
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 15px;
  }
  .star {
    color: gold;
    font-size: 1.1rem;
  }
  .details {
    font-size: 0.9rem;
    color: #444;
    display: flex;
    gap: 25px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  .details span {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  .details svg {
    fill: #444;
    width: 16px;
    height: 16px;
  }
  .skills {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 0;
    color: #222;
  }
  .apply-btn {
    background: #001cff;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 12px 20px;
    font-weight: 700;
    cursor: pointer;
    white-space: nowrap;
    font-size: 1rem;
    transition: background-color 0.3s;
  }
  .apply-btn:hover {
    background: #0000cc;
  }

  /* Expandable Description */
  .desc {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    position: relative;
    line-height: 1.3em;
    max-height: 2.6em; /* 2 lines */
    margin-bottom: 5px;
    transition: max-height 0.3s ease;
  }
  .desc.expanded {
    -webkit-line-clamp: unset;
    max-height: none;
  }
  .see-more-btn {
    color: var(--primary);
    cursor: pointer;
    font-size: 0.95em;
    font-weight: 600;
    background: none;
    border: none;
    padding: 0;
    user-select: none;
    margin-bottom: 10px;
  }

  /* Forms */
  .input,
  textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 13px;
    border-radius: 6px;
    border: 1px solid #d7e4f7;
    font-size: 1em;
    background: var(--bg-light);
    transition: background 0.4s;
    color: var(--text-light);
    box-sizing: border-box;
  }
  textarea {
    resize: vertical;
    min-height: 45px;
  }
  input[type="file"] {
    border: none;
    margin-top: 5px;
    margin-bottom: 14px;
    padding: 0;
    color: var(--primary);
    background: none;
  }

  /* Layout */
  .action-btns {
    float: right;
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
  }
  .no-jobs {
    font-style: italic;
    color: #9ea5ac;
    font-size: 1.01em;
  }

  /* Modal styles */
  .modal-bg {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(30, 40, 55, 0.42);
    z-index: 999;
    align-items: center;
    justify-content: center;
    animation: fadeIn .34s ease;
  }
  .modal {
    background: var(--card-light);
    color: var(--text-light);
    border-radius: var(--border-radius);
    box-shadow: 0 8px 32px rgba(29,44,76,0.14);
    max-width: 370px;
    width: 97vw;
    padding: 22px 26px;
    box-sizing: border-box;
    position: relative;
    animation: popup .23s ease;
  }
  .modal h2 {
    font-size: 1.16em;
    margin-top: 0;
    margin-bottom: 10px;
    color: var(--primary);
  }
  .close-modal {
    position: absolute;
    top: 16px;
    right: 18px;
    background: none;
    border: none;
    font-size: 1.28em;
    color: #888;
    cursor: pointer;
    transition: color 0.15s;
  }
  .close-modal:hover {
    color: var(--accent);
  }
  @keyframes fadeIn {
    from {opacity:0;} to {opacity:1;}
  }
  @keyframes popup {
    from {transform:scale(.7);} to {transform:scale(1);}
  }
  @media (max-width: 650px) {
    .container {
      padding: 8px;
    }
    h1 {
      font-size: 1.38em;
    }
    .top-bar {
      flex-direction: column;
      gap: 8px;
    }
    .job-card {
      flex-wrap: wrap;
    }
    .btn, .mode-toggle, .panel-toggle {
      font-size: 0.96em;
      min-width: 70px;
    }
  }
</style>
</head>
<body>
<div class="container">
  <h1>Job Posting Portal</h1>

  <div class="top-bar">
    <button class="panel-toggle" onclick="togglePanel()">üè¢ Admin Panel</button>
    <button class="mode-toggle" onclick="toggleMode()">üåô Mode</button>
  </div>

  <div class="jobs">
    <h2>Current Job Openings</h2>
    <input type="search" id="userSearch" placeholder="Search jobs by title or company..." autocomplete="off" oninput="renderJobs()" />
    <div id="jobList"></div>
  </div>

  <div class="admin">
    <h2>Add or Manage Jobs</h2>
    <form id="jobForm" onsubmit="addOrUpdateJob(event)">
      <input type="hidden" id="editId" />
      <label for="title">Title</label>
      <input type="text" id="title" class="input" required />
      <label for="company">Company</label>
      <input type="text" id="company" class="input" required />
      <label for="experience">Experience</label>
      <input type="text" id="experience" class="input" placeholder="e.g. 1 to 4 Years" />
      <label for="salary">Salary</label>
      <input type="text" id="salary" class="input" placeholder="e.g. ‚Çπ No disclosed" />
      <label for="location">Location</label>
      <input type="text" id="location" class="input" placeholder="e.g. Pune" />
      <label for="skills">Skills</label>
      <input type="text" id="skills" class="input" placeholder="e.g. HTML, CSS, JavaScript" />
      <label for="desc">Description</label>
      <textarea id="desc" required></textarea>
      <button type="submit" class="btn">Add/Update Job</button>
    </form>
    <input type="search" id="adminSearch" placeholder="Search jobs by title or company..." autocomplete="off" oninput="renderAdminJobs()" style="margin-top:16px" />
    <h2 style="margin-top:30px; font-size:1.1em;">Your Job Listings</h2>
    <div id="adminJobList"></div>
  </div>
</div>

<!-- Modal for Apply Form -->
<div class="modal-bg" id="modalBg" onclick="closeModal(event)">
  <div class="modal" id="modal" onclick="event.stopPropagation()">
    <button class="close-modal" onclick="hideModal()">√ó</button>
    <div id="modalContent"></div>
  </div>
</div>

<script>
  let jobs = [];
  let darkmode = false;
  let applications = [];

  document.querySelector('.jobs').style.display = 'block';
  document.querySelector('.admin').style.display = 'none';

  function togglePanel() {
    const isJobs = document.querySelector('.jobs').style.display === 'block';
    document.querySelector('.jobs').style.display = isJobs ? 'none' : 'block';
    document.querySelector('.admin').style.display = isJobs ? 'block' : 'none';
    document.querySelector('.panel-toggle').innerText = isJobs ? 'üë• Website' : 'üè¢ Admin Panel';
    if (!isJobs) renderJobs();
    else renderAdminJobs();
  }

  function toggleMode() {
    darkmode = !darkmode;
    document.body.setAttribute('data-theme', darkmode ? 'dark' : 'light');
    document.querySelector('.mode-toggle').innerHTML = darkmode ? '‚òÄÔ∏è Mode' : 'üåô Mode';
  }

  function escapeHtml(text) {
    return text
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }

  function renderJobs() {
    let html = "";
    let searchTerm = document.getElementById("userSearch").value.toLowerCase().trim();
    let filtered = jobs.filter(
      (job) =>
        job.title.toLowerCase().includes(searchTerm) ||
        job.company.toLowerCase().includes(searchTerm)
    );
    if (filtered.length === 0) {
      html = '<div class="no-jobs">No jobs found.</div>';
    }
    filtered.forEach((job, idx) => {
      const descId = `desc_${idx}_user`;
      html += `
      <div class="job-card">
        <div class="job-info">
          <h3 class="job-title">${escapeHtml(job.title)}</h3>
          <div class="company-reviews">
            ${escapeHtml(job.company)} <span class="star" title="Reviews">‚òÖ</span> | 234 Reviews
          </div>
          <div class="details">
            <span title="Experience">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M4 4h16v3l-7 9-3-4-6 7v-15z"></path></svg>
              ${escapeHtml(job.experience || "1 to 4 Years")}
            </span>
            <span title="Salary">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M12 2C9 2 6 5 6 8c0 3-2 10-2 10h16s-2-7-2-10c0-3-3-6-6-6zm1 16h-2v-2h2v2zm0-4h-2v-6h2v6z"/></svg>
              ${escapeHtml(job.salary || "‚Çπ No disclosed")}
            </span>
            <span title="Location">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
              ${escapeHtml(job.location || "Pune")}
            </span>
          </div>
          <p class="skills"><strong>Skills :</strong> ${escapeHtml(job.skills || "HTML, CSS, JavaScript")}</p>
          <div class="desc" id="${descId}">${escapeHtml(job.description)}</div>
          ${job.description && job.description.length > 120 ? `<button class="see-more-btn" onclick="toggleDesc('${descId}', this)">See more</button>` : ''}
        </div>
        <button class="apply-btn" onclick="showApplyForm(${idx})">Apply Now</button>
      </div>
      `;
    });
    document.getElementById("jobList").innerHTML = html;
  }

  function renderAdminJobs() {
    let html = "";
    let searchTerm = document.getElementById("adminSearch").value.toLowerCase().trim();
    let filtered = jobs.filter(
      (job) =>
        job.title.toLowerCase().includes(searchTerm) ||
        job.company.toLowerCase().includes(searchTerm)
    );
    if (filtered.length === 0) {
      html = '<div class="no-jobs">No jobs found.</div>';
    }
    filtered.forEach((job, idx) => {
      const descId = `desc_${idx}_admin`;
      html += `
      <div class="job-card">
        <div class="job-info">
          <h3 class="job-title">${escapeHtml(job.title)}</h3>
          <div class="company-reviews">
            ${escapeHtml(job.company)} <span class="star" title="Reviews">‚òÖ</span> | 234 Reviews
          </div>
          <div class="details">
            <span title="Experience">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M4 4h16v3l-7 9-3-4-6 7v-15z"></path></svg>
              ${escapeHtml(job.experience || "1 to 4 Years")}
            </span>
            <span title="Salary">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M12 2C9 2 6 5 6 8c0 3-2 10-2 10h16s-2-7-2-10c0-3-3-6-6-6zm1 16h-2v-2h2v2zm0-4h-2v-6h2v6z"/></svg>
              ${escapeHtml(job.salary || "‚Çπ No disclosed")}
            </span>
            <span title="Location">
              <svg viewBox="0 0 24 24" aria-hidden="true" width="16" height="16" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
              ${escapeHtml(job.location || "Pune")}
            </span>
          </div>
          <p class="skills"><strong>Skills :</strong> ${escapeHtml(job.skills || "HTML, CSS, JavaScript")}</p>
          <div class="desc" id="${descId}">${escapeHtml(job.description)}</div>
          ${job.description && job.description.length > 120 ? `<button class="see-more-btn" onclick="toggleDesc('${descId}', this)">See more</button>` : ''}
        </div>
        <div class="action-btns">
          <button class="btn small edit" onclick="editJob(${idx})">Edit</button>
          <button class="btn small delete" onclick="deleteJob(${idx})">Delete</button>
        </div>
      </div>
      `;
    });
    document.getElementById("adminJobList").innerHTML = html;
  }

  function toggleDesc(descId, btn) {
    const descEl = document.getElementById(descId);
    if (!descEl) return;
    descEl.classList.toggle("expanded");
    btn.textContent = descEl.classList.contains("expanded") ? "See less" : "See more";
  }

  async function addOrUpdateJob(e) {
    e.preventDefault();
    const title = document.getElementById("title").value.trim();
    const company = document.getElementById("company").value.trim();
    const experience = document.getElementById("experience").value.trim();
    const salary = document.getElementById("salary").value.trim();
    const location = document.getElementById("location").value.trim();
    const skills = document.getElementById("skills").value.trim();
    const desc = document.getElementById("desc").value.trim();
    const editId = document.getElementById("editId").value;

    if (editId) {
      jobs[editId] = { title, company, experience, salary, location, skills, description: desc };
      document.getElementById("editId").value = "";
      document.querySelector("#jobForm button").innerText = "Add/Update Job";
    } else {
      jobs.push({ title, company, experience, salary, location, skills, description: desc });
    }
    document.getElementById("title").value = "";
    document.getElementById("company").value = "";
    document.getElementById("experience").value = "";
    document.getElementById("salary").value = "";
    document.getElementById("location").value = "";
    document.getElementById("skills").value = "";
    document.getElementById("desc").value = "";

    renderAdminJobs();
    renderJobs();
    document.getElementById("userSearch").value = "";
    document.getElementById("adminSearch").value = "";
  }

  function editJob(idx) {
    const job = jobs[idx];
    document.getElementById("title").value = job.title;
    document.getElementById("company").value = job.company;
    document.getElementById("experience").value = job.experience || "";
    document.getElementById("salary").value = job.salary || "";
    document.getElementById("location").value = job.location || "";
    document.getElementById("skills").value = job.skills || "";
    document.getElementById("desc").value = job.description;
    document.getElementById("editId").value = idx;
    document.querySelector("#jobForm button").innerText = "Update Job";
  }

  function deleteJob(idx) {
    jobs.splice(idx, 1);
    renderAdminJobs();
    renderJobs();
  }

  function showApplyForm(idx) {
    const job = jobs[idx];
    const modal = document.getElementById("modalContent");
    modal.innerHTML = `
    <h2>Apply to "${escapeHtml(job.title)}" at ${escapeHtml(job.company)}</h2>
    <form id="applyForm" onsubmit="submitApplication(event, ${idx})" enctype="multipart/form-data">
      <label for="candName">Name</label>
      <input id="candName" type="text" class="input" required/>
      <label for="candEmail">Email</label>
      <input id="candEmail" type="email" class="input" required/>
      <label for="candPhone">Phone</label>
      <input id="candPhone" type="tel" class="input" required/>
      <label for="candCurrentSalary">Current Salary</label>
      <input id="candCurrentSalary" type="number" class="input" min="0" step="any" placeholder="Enter your current salary" required/>
      <label for="candSalaryExpectation">Salary Expectation</label>
      <input id="candSalaryExpectation" type="number" class="input" min="0" step="any" placeholder="Enter your salary expectation" required/>
      <label for="candFile">Attach Resume (PDF, DOC, etc)</label>
      <input id="candFile" type="file" accept=".pdf,.doc,.docx,.txt" required/>
      <button type="submit" class="btn apply">Submit Application</button>
    </form>
    <div id="applySuccess"></div>
    `;
    showModal();
  }

  function showModal() {
    document.getElementById("modalBg").style.display = "flex";
  }
  function hideModal() {
    document.getElementById("modalBg").style.display = "none";
  }
  function closeModal(e) {
    if (e.target === document.getElementById("modalBg")) {
      hideModal();
    }
  }

  function submitApplication(e, idx) {
    e.preventDefault();
    const name = document.getElementById("candName").value.trim();
    const email = document.getElementById("candEmail").value.trim();
    const phone = document.getElementById("candPhone").value.trim();
    const currSalary = document.getElementById("candCurrentSalary").value.trim();
    const salaryExp = document.getElementById("candSalaryExpectation").value.trim();
    const fileInput = document.getElementById("candFile");
    const file = fileInput.files[0];
    let fileInfo = null;
    if (file) {
      fileInfo = {
        name: file.name,
        size: file.size,
        type: file.type,
      };
    }
    applications.push({
      jobIdx: idx,
      name,
      email,
      phone,
      currSalary,
      salaryExp,
      file: fileInfo,
      jobTitle: jobs[idx]?.title,
      jobCompany: jobs[idx]?.company,
    });
    document.getElementById("applyForm").reset();
    document.getElementById("applySuccess").innerHTML = `
    <div class="success-msg">Thank you, your application has been submitted!</div>
    `;
    setTimeout(hideModal, 1800);
  }

  // Initial render
  renderJobs();
  renderAdminJobs();
</script>
</body>
</html>>
